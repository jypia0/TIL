# 1단계: 저장소 시작 & 원격 저장소 등록
## 원격 저장소 복제
```bash
git clone <repo-url>
```
- 자동으로 `.git` 설정 + 기본 브랜치 설정까지 포함됨
- git init, git remote add origin <"repo-url">, git fetch, checkout 등 포함

## 또는 로컬에서 직접 초기화
```bash
git init         #현재 디렉토리를 Git저장소로 선언 (`.git` 디렉토리 생성)
git remote add origin <repo-url> #원격 저장소 등록
git status       #수정/삭제/생성 전 상태 확인
```
- Git은 해당 폴더 안의 `.git 디렉토리`를 통해 모든 버전 정보를 추적


## `.git` 내부 구조
```
.git/
 - config        # 저장소 설정 정보
 - HEAD          # 현재 브랜치 참조
 - objects/      # 커밋/트리/파일 객체 저장
 - refs/         # 브랜치 & 태그 포인터
 - index         # 스테이징 영역
```

---

# 2단계: 최신 내용 동기화
```bash
git fetch origin                    # 1, 원격 정보 가져오기
git log HEAD..origin/main --oneline # 2, 변경 사항 확인
git pull --rebase                   # 3, 최신 내용 반영(파일 수정 후에는 불가능)
git status                          # pull 이후 상태 확인
```
**실무 예시**
 - 다른 팀원이 먼저 main 브랜치에 push → 내 브랜치에서 `pull --rebase`로 최신 내용 반영

 - 충돌 발생 시 수동 수정 + `git rebase --continue`

---

# 3단계: 브랜치 전략과 흐름

```bash
git switch -c <브랜치명>
git branch -d <브랜치명>   # 병합 후 삭제
```
```bash
git checkout -b <브랜치>   # = git switch -c
git branch <브랜치명>      # 생성
git switch <브랜치명>      # 전환, 이동
git branch -D <브랜치명>   # 강제 삭제
```

## 브랜치 구조 전략

1) 초기 세팅: **Main(현재 버전), Develop(다음 버전)** 브랜치 생성
2) 기능 개발: Develop에서 **Feature/* ** 브랜치 생성 → 개발 완료 후 **Develop에 Merge**
3) 릴리즈(QA) 준비: QA를 준비하기 위해 Develop에서 **Release** 브랜치 생성 → **QA** 진행
4) QA 중 수정: 버그 발생 시 **Release에서 수정**
5) 배포 및 병합: QA 완료 후 Release → Main, Develop 모두에 **Merge**
6) 긴급 수정: **Main에서 Hotfix** 브랜치 생성 → 수정 후 Main, Develop에 병합
---

# 4단계: 코드 수정 / .gitignore 관리

```bash
git status        #수정 후 어떤 파일이 변경/추가됐는지 다시 확인
git restore <파일> #수정 전으로 되돌리기(복원 불가)
```

- **.gitkeep**: 빈 폴더를 Git에 포함시키기 위한 파일

- **.gitignore**: Git 추적 제외 파일 설정
   - *.png → 모든 PNG 파일 제외
   - image/* → image 폴더 내 모든 파일 제외
   - *secret* → 파일명에 secret 포함된 것 제외
   - gitignore.io에서 템플릿 생성 가능
- **README.md**: 협업/배포를 위한 문서
   - 사용 기술, 설치법, 실행법 등 마크다운으로 구성
   - shields.io로 뱃지 추가 가능

---
# + 변경사항 임시 저장
```bash
git stash                  #변경사항 임시 저장
git pull --rebase
git stash pop              #rebase 이후 변경사항 적용
```
---
# 5단계: 스테이징 (Staging Area)

```bash
git add .                   #전체 변경사항 스테이징
git add <파일>              #지정 파일 스테이징

git restore --staged <파일> #스테이징 전으로 되돌리기

git status                  #스테이징 성공 여부 항상 확인
```

---

# 6단계: 커밋 전략

```bash
git commit -m "feat: 로그인 기능 추가 (#12)"  #커밋 메시지에 이슈 번호 포함
git commit --amend                          # 커밋 전으로 되돌리기
```

## 커밋 메시지 type

* `feat`: 기능 추가
* `fix`: 버그 수정
* `refactor`: 리팩토링
* `docs`: 문서 수정
* `style`, `test`, `chore`

> 작고 명확한 단위로 커밋 → 깔끔한 히스토리 구성 가능

---

# 7단계: 병합 vs 리베이스
## - 병합 (브랜치의 작업을 main에 병합)
  
```bash
git switch main           ## 1, 병합을 실행할 브랜치로 이동
git merge <브랜치명>       ## 2, merge
git branch -d <브랜치명>   ## 3, 병합된 브랜치 정리(삭제)
```

## - 리베이스 (작업 브랜치에서 main 최신 내용 반영 시 사용)
```bash
git switch <브랜치명>
git rebase main
```
| 구분    | 병합 (merge)         | 리베이스 (rebase)   |
| ----- | ------------------ | --------------- |
| 히스토리  | 분기+병합 구조 유지        | 직선 정리됨          |
| 커밋 수  | 늘어남 (merge commit) | 줄어듦 (squash 가능) |
| 협업 시기 | 안정 배포 직전           | 작업 브랜치 통합 전     |

---

# 8단계: 충돌 처리

```bash
# 병합 중 충돌 발생 시
파일 수정
git add <수정된 파일>
git commit -m "커밋 메세지"

# rebase 중 충돌 발생 시
파일 수정
git add <수정된 파일>
git rebase --continue
```
 > **<<<<<<< HEAD, =======, >>>>>>> 표시 확인**

 > **GitHub/GitLab은 Web IDE로도 충돌 해결 지원함**

---

# 9단계: 푸시 & 브랜치 연결

```bash
git push -u origin main #처음 연결 시(로컬 브랜치가 원격에 없을 때)
```
- `-u`(--set-upstream): 로컬 브랜치와 원격 브랜치를 연결해 추후 git push/pull 간소화
```bash
git push #병합/커밋 후 원격 저장소로 푸시
git pull #협업 중이라면 주기적으로 최신 내용 반영
```
> ✅ **실무 예시**: `feat/search` → push → GitHub에서 PR 생성 → 팀 리뷰 후 merge

---

# 10단계: 복구 전략 & 실수 대비

```bash
git stash         # 임시 저장
git stash pop     # 복원

git reset --soft <커밋ID>
git reset --hard <커밋ID>

git revert <커밋ID>  # 협업 시 안전

git reflog            # HEAD 이력 추적
```

| 항목     | reset | revert   |
| ------ | ----- | -------- |
| 동작     | 커밋 삭제 | 반대 커밋 생성 |
| 협업 적합성 | ❌ 낮음  | ✅ 높음     |

> 실수한 커밋 삭제 전 `git reflog` 확인 필수

---

# 11단계: 커밋 로그 정리

```bash
git rebase -i HEAD~3
# pick → squash or reword 가능

git log --oneline --graph
```

> 커밋을 정리해 하나의 기능 단위 커밋으로 깔끔하게 압축 가능

---
---
---

# **+ 개념 확장: 병합 방식 & 협업 모델**

## 병합 방식

* Fast-forward: 직선 이동
* 3-way Merge: 공통 조상 기준 병합 (기록 유지)

## 협업 모델 비교

| 모델                | 사용처     | 특징                  |
| ----------------- | ------- | ------------------- |
| Shared Repository | 사내 프로젝트 | 모든 작업자가 Push 가능     |
| Fork & PR         | 오픈소스    | Fork → Push → PR 요청 |

## PR 작성 가이드라인

* 제목: `feat: 검색 기능 추가 (#45)`
* 본문: 작업 요약, 영향 받은 부분, 관련 이슈
* Reviewer, 라벨 설정 필수

---

## CI/CD 연동 예시 (GitHub Actions)

```yaml
# .github/workflows/test.yml
name: Run Tests
on: [push, pull_request]
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - run: npm install
      - run: npm test
```

> Push 후 자동 테스트 → PR 통과 → 병합 → 배포 연결 가능
