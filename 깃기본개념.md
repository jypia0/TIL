
# 🧠 Git 원리 중심 심화 정리 (Deep Dive)

## 📁 1. Git 시작 구조와 철학

### 📌 Git이란 무엇인가?
Git은 단순한 버전 관리 도구가 아니다. Git은 **스냅샷 기반의 분산 버전 관리 시스템(DVCS)**이다. Git은 파일의 변경사항을 시간 순서대로 저장하며, **변경의 흐름**을 철저히 기록하고 되돌릴 수 있도록 설계되어 있다.

### 📂 Git 저장소 초기화: `git init`
```bash
cd <작업 디렉토리>
git init
```
> 현재 디렉토리를 `.git`이라는 숨김 디렉토리가 포함된 Git 저장소로 변환함

#### `.git` 디렉토리 내부 구조
```
.git/
├── config         # 저장소 설정 정보
├── HEAD           # 현재 브랜치의 커밋을 가리킴
├── objects/       # blob, tree, commit 객체들이 저장됨
├── refs/          # 브랜치 및 태그 정보
└── index          # Staging Area 정보
```

## 🔍 2. Git의 세 가지 작업 공간

| 구성 요소 | 설명 | 관련 명령 |
|-----------|------|------------|
| Working Directory | 실제 파일이 있는 작업 디렉토리 | `git restore` |
| Staging Area (Index) | 커밋할 파일을 잠시 올려두는 대기 공간 | `git add`, `git restore --staged` |
| Repository | 실제 커밋 기록이 저장되는 공간 | `git commit` |

## ✅ 3. Git 작업 흐름 요약

```bash
git status                       # 현재 상태 확인
git add .                        # 변경된 모든 파일을 staging에 올리기
git commit -m "메시지"        # staging에 올린 파일을 저장소에 커밋
git log --oneline --graph --all  # 커밋 히스토리 시각화
```

## 🔁 4. Git 되돌리기 전략들 (Undoing)

### 🧼 Working Directory 변경 취소
```bash
git restore <파일명>
```
> 이전 커밋 상태로 복원 (주의: 복구 불가)

---

### 🗑️ Staging Area(스테이징)에서 제거
- 커밋 전 파일 제거:
```bash
git restore --staged <파일명>
```
- root commit 이전이면:
```bash
git rm --cached <파일명>
```

---

### 🧩 직전 커밋 수정: `git commit --amend`
- 메시지만 수정: 스테이징된 변경이 없을 때
- 내용도 수정: 스테이징된 변경이 있을 때

```bash
git commit --amend
```

> 내부적으로는 새로운 커밋을 만든 후, 이전 커밋을 대체함

## ⏪ 5. Git 리셋 vs 리버트

### 🧨 `git reset`
```bash
git reset [--soft|--mixed|--hard] <커밋ID>
```
| 옵션 | 설명 |
|------|------|
| `--soft` | 커밋만 되돌림. 변경내용은 Staging Area에 유지 |
| `--mixed` | 커밋 + 스테이징까지 되돌림 (작업 내용은 유지) |
| `--hard` | 모든 내용 되돌림 (작업 내용까지 삭제) |

**주의:** `--hard`는 복구 어려움. `git reflog`로 복구 가능

```bash
git reflog     # 이전 HEAD 위치 추적
```

---

### ✅ `git revert`
```bash
git revert <커밋ID>
```
> 해당 커밋의 변경을 취소하는 **새 커밋**을 생성함. 협업 시 더 안전한 방식

## 🌿 6. Git 브랜치 완전 이해

### 브랜치란?
브랜치는 단순한 포인터. 특정 커밋을 가리키는 이름표에 불과함. Git은 이를 통해 병렬적인 작업을 독립적으로 수행하게 해줌.

### 주요 명령어
```bash
git branch                # 로컬 브랜치 목록
git branch -r            # 원격 브랜치 목록

git branch feature/login       # 브랜치 생성
git switch feature/login       # 브랜치 전환
git switch -c new-feature      # 생성 + 전환

git branch -d feature/login    # 병합된 브랜치 삭제
git branch -D feature/login    # 강제 삭제
```

## 🔀 7. Git 병합 전략 (merge)

```bash
git merge <브랜치 이름>
```
> 메인 브랜치에서 실행할 것 (`git switch main` 등)

### 병합 방식
| 방식 | 설명 |
|------|------|
| Fast-forward | 브랜치가 직선일 때 단순히 포인터만 이동 |
| 3-way Merge | 공통 조상을 기준으로 병합 커밋 생성 |

### 충돌 해결
- 동일 파일 동일 위치 수정 시 충돌 발생
- 수동으로 `<<<<<<<`, `=======`, `>>>>>>>` 수정
- 수정 후 `git add` 및 `git commit`으로 병합 마무리

## 🌐 8. Git 협업 모델 (Workflow)

### Shared Repository Model
> 저장소 소유권 있음 (팀 협업에 적합)

```bash
git clone <repo>
git switch -c feature-branch
# 작업

git add .
git commit -m "..."
git push origin feature-branch
# 이후 GitHub에서 Pull Request 생성
```

### Fork & Pull Model
> 저장소 소유권 없음 (외부 기여자에게 적합)

```bash
git fork (GitHub에서)
git clone <본인 레포지토리>
# 작업

git push origin <브랜치>
# Pull Request로 기여 요청
```

---

## 🧠 핵심 개념 요약

| 개념 | 설명 |
|------|------|
| Git은 스냅샷 기반 시스템 | 변경 기록 전체 저장 아님 (압축된 스냅샷) |
| HEAD | 현재 작업 중인 커밋 포인터 |
| reset vs revert | 기록을 바꾸느냐, 되돌리는 새 기록을 남기느냐 |
| 브랜치 | 커밋을 가리키는 이름표 (포인터) |
| 병합 | 브랜치를 한 지점에서 통합하는 작업 |

---

> 📘 이 문서는 Git을 단순한 툴이 아닌 "버전 제어 철학"의 관점에서 심층적으로 해석한 정리입니다. 실무에서 안정적이고 협업 중심의 Git 운용을 위해 원리적 이해를 바탕으로 설계되었습니다.

> 작성자: [당신의 이름]  
> 날짜: 2025-05-24  
> Github 업로드용 `.md` 형식 정리
