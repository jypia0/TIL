# 📘 Git 실전 흐름과 원론적 구조 정리

---

## 🧭 1단계: 디렉토리 이동

```bash
cd <폴더 경로>
```
- `cd` = Change Directory: 작업을 수행할 디렉토리(폴더)로 이동
- Git은 해당 폴더 안에서 `.git` 디렉토리를 통해 모든 버전 정보를 추적하기 때문에, **작업 디렉토리를 정확히 설정하는 것이 중요**


## 🧱 2단계: Git 저장소 초기화

```bash
git init
```
- 현재 디렉토리를 Git 저장소로 선언
- `.git` 디렉토리 생성됨 → Git의 핵심 데이터베이스

#### `.git` 내부 구조
```
.git/
├── config        # 저장소 설정 정보
├── HEAD          # 현재 브랜치가 어떤 커밋을 가리키는지
├── objects/      # 커밋, 트리, 블롭 등의 실제 내용 저장소
├── refs/         # 브랜치, 태그의 포인터들
└── index         # 스테이징 영역 (Staging Area)
```


## 🔍 3단계: 현재 Git 상태 확인

```bash
git status
```
- 작업 디렉토리, 스테이징 영역, 커밋 여부 등의 상태를 확인함

### Git의 3단계 작업 공간
| 구분 | 의미 | 되돌리기 명령 |
|------|------|----------------|
| Working Directory | 실질적으로 파일을 수정하는 공간 | `git restore <파일>` |
| Staging Area | 커밋할 파일을 잠시 보관하는 공간 | `git restore --staged`, `git rm --cached` |
| Repository | 커밋된 스냅샷이 저장되는 영역 | `git commit --amend` |

> ❗ `git restore`는 복원이 불가할 수 있으므로 주의


## 🗂️ 4단계: 커밋에 포함할 파일 선택

```bash
git add .
```
- 현재 디렉토리 내 **모든 변경 파일을 스테이징**에 추가함
- 부분적으로 추가하고 싶다면 `git add 파일명` 형식으로도 가능


## 🧾 5단계: 커밋 수행

```bash
git commit -m "초기 구조 커밋"
```
- 스테이징 영역의 변경 사항을 커밋하여 **하나의 버전으로 기록**함
- 커밋의 상태:
  - Untracked: 추적되지 않는 새 파일
  - Unmodified: 추적되지만 변경되지 않음
  - Modified: 변경되었지만 스테이징되지 않음
  - Staged: 커밋 대상에 올라간 상태

> 커밋은 Git의 핵심 단위로, 하나의 **스냅샷 시점**이라고 볼 수 있음


## ♻️ 커밋 되돌리기

### ✅ `git reset`
```bash
git reset [--soft | --mixed | --hard] <커밋ID>
```
- soft: 커밋만 취소하고 변경 내용은 Staging에 남김
- mixed (기본): 커밋과 Staging은 초기화, 변경 파일은 Working Directory에 보존
- hard: 모두 삭제 (되돌릴 수 없음)

#### 복구 팁
```bash
git reflog   # 최근 HEAD 변경 이력 조회
```
> reset 전에 HEAD 위치를 추적하여 복원 가능

---

### ✅ `git revert`
```bash
git revert <커밋ID>
```
- 해당 커밋을 **취소하는 새로운 커밋을 생성**함
- 기록은 유지되며 협업에 안전함

#### 차이 요약
| 구분 | reset | revert |
|------|-------|--------|
| 개념 | 기록 자체 제거 | 취소 커밋 생성 |
| 협업 안정성 | 낮음 | 높음 |


## 🌿 Git 브랜치 이해

- 브랜치는 커밋을 가리키는 **가벼운 포인터**
- 독립적인 개발 라인 구축 가능

### 브랜치 명명 예시
- `develop`: 전체 개발 진행
- `feat/front/dashboard`: 프론트엔드 작업
- `feat/back/login`: 백엔드 기능 작업
- `deploy`: 배포용

### 브랜치 명령어
```bash
git branch                   # 로컬 브랜치 목록
git branch -r               # 원격 브랜치 목록

git branch <이름>           # 브랜치 생성
git branch <이름> <커밋ID>  # 특정 커밋 기준 생성

git branch -d <이름>        # 병합된 브랜치 삭제
git branch -D <이름>        # 강제 삭제

git switch <이름>           # 브랜치 이동
git switch -c <이름>        # 생성 + 이동
```
> 또는 `git checkout -b <브랜치>`도 사용 가능


## 🔀 Git 병합 (merge)

```bash
git switch main   # 병합 대상 브랜치로 이동
git merge <기능브랜치>
```
- Fast-forward: 직선 이동
- 3-way Merge: 공통 조상 기준으로 병합 커밋 생성

> 충돌 발생 시 `<<<<<<<` 표시된 부분 수동 수정 필요


## 📜 6단계: 커밋 히스토리 시각화

```bash
git log --oneline --graph --all
```
- 커밋 요약 보기 (SHA-1 해시, 메시지)
- Git은 **DAG (Directed Acyclic Graph)** 기반 구조로 커밋과 브랜치를 표현함


## 🌐 7단계: GitHub 원격 저장소 등록

```bash
git remote add origin https://github.com/사용자명/레포이름.git
```
- `origin`이라는 이름으로 원격 저장소 등록
- 확인: `git remote -v`

> 제거: `git remote remove origin`


## 🚀 8단계: 원격 저장소 연결 확인

```bash
git remote -v           # fetch/push 주소 확인
git remote show origin # 브랜치 추적 상태, fetch 대상 등 출력
git remote get-url origin # URL만 출력
```


## ⬆️ 9단계: GitHub에 Push

| 개념 | 설명 |
|------|------|
| Git은 스냅샷 기반 시스템 | 변경 기록 전체 저장 아님 (압축된 스냅샷) |
| HEAD | 현재 작업 중인 커밋 포인터 |
| reset vs revert | 기록을 바꾸느냐, 되돌리는 새 기록을 남기느냐 |
| 브랜치 | 커밋을 가리키는 이름표 (포인터) |
| 병합 | 브랜치를 한 지점에서 통합하는 작업 |
